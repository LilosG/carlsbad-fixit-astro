---
import Base from "../../layouts/Base.astro";
import Breadcrumbs from "../../components/Breadcrumbs.astro";

export const getStaticPaths = () => {
  const cities = ["Carlsbad","Chula Vista","Del Mar","Encinitas","Escondido","La Jolla","La Mesa","Oceanside","Poway","San Diego","San Marcos"];
  return cities.map(c => ({ params: { slug: c.toLowerCase().replaceAll(" ","-") } }));
};

const citySlug = (Astro.params.slug || "").toLowerCase();
const city = citySlug.split("-").map(s => s.charAt(0).toUpperCase()+s.slice(1)).join(" ");

const title = `Handyman in ${city}`;
const description = `Same-week handyman service in ${city}: drywall repair and furniture assembly with upfront pricing.`;
const canonical = `https://sandiegohandymanpros.co/service-areas/${citySlug}`;

const links = [
  { label: `Drywall Repair in ${city}`, href: `/services/drywall-repair/${citySlug}` },
  { label: `Furniture Assembly in ${city}`, href: `/services/furniture-assembly/${citySlug}` }
];

const faqs = [
  { q: `Do you work in my ${city} neighborhood?`, a: `Yes, we cover most neighborhoods in ${city} with the same-week schedule.` },
  { q: "How do quotes work?", a: "Send a few photos; we confirm scope, price, and earliest availability." },
  { q: "Can you haul debris?", a: "Light debris from our work is included; larger loads can be added to the quote." }
];

const schema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  mainEntity: faqs.map(i => ({
    "@type": "Question",
    name: i.q,
    acceptedAnswer: { "@type": "Answer", text: i.a }
  }))
};
---
<Base {title} {description} {canonical} schema={schema}>
  <Breadcrumbs items={[
    { href: "/", label: "Home" },
    { href: "/service-areas", label: "Service Areas" },
    { href: `/service-areas/`, label: city }
  ]} />
  <section class="container py-10">
    <h1 class="h1">{title}</h1>
    <p class="lead mt-3 max-w-prose">Local, reliable, and tidy. We keep appointments and leave your space better than we found it.</p>

    <h2 class="h2 mt-10">Popular in {city}</h2>
    <ul class="mt-4 grid gap-3 sm:grid-cols-2">
      {links.map(l => <li><a class="card hover:border-ink-300" href={l.href}>{l.label}</a></li>)}
    </ul>

    <h2 class="h2 mt-10">FAQs</h2>
    <div class="mt-4 grid gap-3">
      {faqs.map(i => (
        <details class="card">
          <summary class="font-medium">{i.q}</summary>
          <div class="mt-2 text-ink-700">{i.a}</div>
        </details>
      ))}
    </div>
  </section>
</Base>
